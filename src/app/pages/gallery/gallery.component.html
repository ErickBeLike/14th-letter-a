<div class="min-h-screen museum-wall overflow-x-hidden pb-10 selection:bg-amber-200 selection:text-amber-900 relative"
    [class.gallery-exit-glitch]="isGlitchingOut()" [class.gallery-fade-out]="isReturning()">

    <div class="museum-wall-overlay"></div>

    <button (click)="returnToEnvelope()" class="fixed top-6 left-6 z-50 group cursor-pointer
                   bg-[#fdfbf7]/90 backdrop-blur-sm 
                   border border-rose-900/20 rounded-[2px] shadow-sm
                   px-5 py-2 transition-all duration-300
                   hover:bg-white hover:border-rose-900/40 hover:shadow-md hover:-translate-y-0.5
                   animate-ethereal-entry">
        <div class="flex items-center gap-3">
            <span class="text-rose-800/60 group-hover:text-rose-800 transition-colors text-lg leading-none pb-0.5">
                ‚Üê
            </span>
            <span
                class="font-serif text-xs font-bold tracking-[0.25em] text-rose-900/70 group-hover:text-rose-900 uppercase">
                Inicio
            </span>
        </div>
    </button>

    <div class="vine-border vine-border-y vine-left"></div>
    <div class="vine-border vine-border-y vine-right"></div>
    <div class="vine-border vine-border-x vine-top"></div>
    <div class="vine-border vine-border-x vine-bottom"></div>

    <header class="relative z-10 pt-24 pb-4 text-center px-4 animate-fade-in-up delay-100">
        <div class="inline-block mb-4">
            <span class="text-2xl filter drop-shadow-md">üï∞Ô∏è</span>
        </div>
        <h1 class="font-['Dancing_Script'] text-4xl md:text-5xl text-[#9f1239] mb-3 drop-shadow-md font-bold">
            Nuestra Historia
        </h1>

        <p
            class="font-serif text-rose-950/80 text-xs tracking-[0.2em] uppercase border-t border-b border-rose-900/20 py-2 inline-block px-8 bg-[#dccbb6]/40 backdrop-blur-[2px] rounded-sm shadow-sm">
            Galer√≠a de Recuerdos
        </p>
    </header>

    <section class="relative z-10 max-w-xs mx-auto px-4 mt-6 mb-4 text-center animate-fade-in-up delay-300">
        <div class="text-rose-800/40 text-lg mb-3">~ ‚ù¶ ~</div>
        <div class="font-serif text-stone-600 italic text-sm md:text-base leading-relaxed opacity-90">
            Antes que nada he de desearte un feliz san Valent√≠n y obsequiarte un peque√±o detallito hecho con mucho amor
            y cari√±o.
            <br> <br>
            Hasta cierto punto se sabe que soy fan de las manualidades pero tristemente no te tengo a poquitas cuadras
            para irtelas a dejar y no se sabe de un encuentro volumen 2, por lo que qu√© mejor que una peque√±a manualidad
            digital.
            <br> <br>
            Siendo sinceros pens√© en escibirte una carta f√≠sica, pero entre mi letra que es un lat√≠n antiguo y los
            correos que a saber cu√°nto tiempo se demoran en entregar (adem√°s que nunca he enviado uno, jeje), prefer√≠
            hacerte esta cartita en forma de chiqui-app, alg√∫n d√≠a prometo darte una en persona.
            <br> <br>
            De igual forma, entre no querer dejar texto a secas y que me encanta hablar de esta chistosa historia que
            tenemos, opt√© por crear una mini galer√≠a de recuerdos con un muy breve resumen de estos.
            <br> <br>
            Espero que te guste <3. </div>
                <div class="text-rose-800/40 text-lg mt-3">~ ‚ù¶ ~</div>
    </section>

    <main class="relative z-10 max-w-md mx-auto px-6 flex flex-col gap-24 mt-8 pt-8 animate-fade-in-up delay-500">
        @for (memory of memories; track memory.id) {
        <app-memory-frame [data]="memory" (showDetails)="openModal(memory)"></app-memory-frame>
        }
    </main>


    <div class="relative z-10 mt-8 mb-20 flex flex-col items-center justify-center animate-fade-in-up delay-700">

        <div class="w-[1px] h-16 bg-gradient-to-b from-rose-200 to-transparent mb-4"></div>

        <button (click)="navigateToBot()" class="btn-mystery w-14 h-14 rounded-full bg-[#fff9fa] border border-rose-200 text-rose-400 
                       flex items-center justify-center shadow-lg transition-all duration-300 
                       hover:scale-110 hover:text-rose-600 hover:border-rose-300 hover:bg-white
                       animate-float-slow group cursor-pointer relative z-20">

            <span class="font-['Dancing_Script'] text-2xl font-bold">?</span>

            <span
                class="absolute -top-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 
                         text-[10px] tracking-[0.2em] text-stone-400 bg-white/90 px-3 py-1 rounded-sm shadow-sm whitespace-nowrap pointer-events-none">
                CONTINUAR
            </span>
        </button>

        <div class="mt-4 text-rose-300/60 animate-float-simple">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M19 14l-7 7m0 0l-7-7m7 7V3" />
            </svg>
        </div>

        <div class="h-10"></div>
    </div>


    @if (activeMemory()) {
    <div class="fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in"
        [class.animate-fade-out]="isClosing()">

        <div class="absolute inset-0 bg-stone-900/60 backdrop-blur-sm transition-opacity" (click)="closeModal()"></div>

        <div class="relative w-full max-w-lg bg-[#fff9fa] rounded-sm shadow-2xl overflow-hidden flex flex-col max-h-[85vh] animate-slide-up"
            [class.animate-slide-down]="isClosing()">

            <div class="h-2 w-full bg-gradient-to-r from-rose-300 via-rose-500 to-rose-300"></div>

            <button (click)="closeModal()"
                class="absolute top-4 right-4 z-10 w-8 h-8 flex items-center justify-center rounded-full bg-rose-50 text-rose-800 hover:bg-rose-100 transition-colors shadow-sm">
                <span class="text-xl font-bold leading-none">&times;</span>
            </button>

            <div class="overflow-y-auto p-8 custom-scrollbar">

                <div class="text-center mb-4 text-3xl">üíå</div>

                <h2 class="font-['Dancing_Script'] text-3xl text-rose-900 text-center font-bold mb-2">
                    {{ activeMemory()?.title }}
                </h2>

                <p
                    class="text-center text-xs font-serif uppercase tracking-widest text-stone-500 mb-6 border-b border-rose-100 pb-4">
                    {{ activeMemory()?.date }}
                </p>

                <div class="font-serif text-stone-700 text-lg leading-relaxed whitespace-pre-line text-justify">
                    {{ activeMemory()?.description }}
                </div>

                <div class="mt-8 text-center text-rose-300 text-xl">
                    &hearts;
                </div>
            </div>
        </div>
    </div>
    }

</div>